<%- include('./partials/header') %>

<section class="c-banner-jogo" style="background-image: url('buscaImagem/<%= jogo.fotoTema %>');"></section>
<main class="container c-jogo">
  <input type="hidden" id="jogoId" value="<%= jogo.id %>">
  <div class="c-jogo__left">
    <div class="c-jogo__left--description c-jogo__left--content" data-aos="fade-up" data-aos-duration="1000"
      data-aos-delay="200">
      <div class='c-photo-game' id='headPage'
        style="background: url('buscaImagem/<%= jogo.foto %>') center center no-repeat; min-height: 280px;">
        <p id="notaJogo" class="c-total-note c-category-<%= jogo.tema_id %> o-border-shadow">
          <%= (jogo.notaJogo / 2).toFixed(1) %>&nbsp;<i class="icon ion-star"></i>
        </p>
      </div>
      <div class="c-jogo__description c-category-<%= jogo.tema_id %>">
        <h2 id='jogoNome' style="text-align: center;"><%= jogo.nome %></h2>
        <br>
        <p style="text-align: center;">Duração:</p>
        <p style="text-align: center;"><%= jogo.duracao %> minutos</p>
        <br>
        <p style="text-align: center;">Quantidade:</p>
        <p style="text-align: center;"><%= jogo.qntMin %> a <%= jogo.qntMax %> jogadores</p>
        <br>

        <p style="text-align: center;">Faixa etária:</p>
        <% if (jogo.faixaEtaria === 0){ %>
          <p style="text-align: center;">Livre</p>
        <% }else{ %>
          <p style="text-align: center;">+ <%= jogo.faixaEtaria %> anos</p>
        <% } %>

        <a class="c-tag c-jogo__tag c-category-<%= jogo.tema_id %>">Tema do jogo: <%= jogo.tema.nome %></a>
      </div>
    </div>
    <div class="c-jogo__left--news c-jogo__left--content o-border-shadow" data-aos="fade-up" data-aos-duration="1000"
      data-aos-delay="200">
      <h5>Confira os Jogos Relacionados</h5>
      <ul class='c-jogo__game-relationship'>
        <% for(let jogoRelacionado of jogosRelacionados) { %>
        <li>
          <a href="/jogo?id=<%= jogoRelacionado.id %>">
            <img src="/buscaImagem/<%= jogoRelacionado.foto %>">
            <h6><%= jogoRelacionado.nome %></h6>
          </a>
        </li>
        <% } %>
      </ul>
    </div>
  </div>
  <div class="c-jogo__right" style="margin-top: 35px;">
    <div class="c-jogo__right--info c-jogo__right--content" data-aos="fade-up" data-aos-duration="1000"
      data-aos-delay="400">
      <h2 id='rated' class="c-jogo__right--title o-border-shadow">

        <div class="c-jogo__action-buttons">
          <a id="colecao" class="btn btn-primary">
            <%= colecao ? 'Retira coleção' : 'Adiciona coleção'  %>
          </a>
          <a id="favoritar" class="btn btn-secondary">
            <%= favorito ? 'Desfavoritar' : 'Favoritar'  %>
          </a>
          <a id="jaJoguei" class="btn btn-primary">
            <%= jaJoguei ? 'Retira joguei' : 'Adiciona joguei'  %>
          </a>
        </div>
        
        <div class="c-jogo__avaliate">
          <%- include('./partials/rating') %>  
        </div>
      </h2>
      <!-- <div id='jogolinkYoutube'><iframe  width="560" height="315" src="https://www.youtube.com/embed/aR-KAldshAE" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></div> -->
    </div>
    <div class="c-jogo__right--menu c-jogo__right--content" data-aos="fade-up" data-aos-duration="1000"
      data-aos-delay="400">
      <div>
        <h1 class="game-name"><%= jogo.nome %> (<%= jogo.ano %>)</h1>
        <h6 class="game-detail">Descrição:</h6>
        <p class="game-detail-content"><%= jogo.descricao %></p>
        
        <h6 class="game-detail">Peso (Dificuldade):</h6>
        <% if (jogo.peso === 1){ %>
          <p class="game-detail-content">Leve</p>
        <% } %>
        <% if (jogo.peso === 2){ %>
          <p class="game-detail-content">Médio-Leve</p>
        <% } %>
        <% if (jogo.peso === 3){ %>
          <p class="game-detail-content">Médio</p>
        <% } %>
        <% if (jogo.peso === 4){ %>
          <p class="game-detail-content">Médio-Pesado</p>
        <% } %>
        <% if (jogo.peso === 5){ %>
          <p class="game-detail-content">Pesado</p>
        <% } %>

        <h6 class="game-detail">Downtime:</h6>
        <% if (jogo.downtime === 1){ %>
          <p class="game-detail-content">Baixo</p>
        <% } %>
        <% if (jogo.downtime === 2){ %>
          <p class="game-detail-content">Médio</p>
        <% } %>
        <% if (jogo.downtime === 3){ %>
          <p class="game-detail-content">Alto</p>
        <% } %>

        <h6 class="game-detail">Domínio:</h6>
        <p class="game-detail-content"><%= jogo.dominio.nome %></p>

        <h6 class="game-detail">Mecânica:</h6>
        <p class="game-detail-content"><%= jogo.mecanica.nome %></p>

      </div>
      <!-- <div id='jogolinkYoutube'><iframe  width="560" height="315" src="https://www.youtube.com/embed/aR-KAldshAE" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe></div> -->
    </div>
    <div class="c-jogo__right--evaluation c-jogo__right--content"
      style="background-color: transparent; padding-bottom: 0;" data-aos="fade-up" data-aos-duration="1000"
      data-aos-delay="200">
      <h2 class="c-jogo__right--title c-category-<%= jogo.tema_id %> o-color-white o-border-shadow"><i
          class="icon ion-android-star-half"></i>
        Avaliações</h2>
    </div>
    <div class="c-jogo__right--comments c-jogo__right--content" data-aos="fade-up" data-aos-duration="1000"
      data-aos-delay="200">
      <div id="comentarios">
        <%- include('./partials/comments', {comentarios, flagPerfilUsuario : false}) %>
      </div>
      <% if(comentarios.length == 0) { %>
      <p id="no-data" style="text-align: center;">Este jogo ainda não possui avaliações</p>
      <%} else if(countComentarios > 6) {%>
      <a id="verMais" style="color: white;" class="c-bt-default" onclick="carregaComentarios('<%= jogo.id %>')">Ver
        mais</a>
      <%}%>
    </div>

  </div>

</main>

<%- include('./partials/footer') %>

      <script>
        let dominantColor = "<%= dominantColor %>";
        let pageUrl = window.location.host;
        let btTheme = document.querySelector('.c-tag');

        btTheme.setAttribute('href', 'http://' + pageUrl + '/busca?tipo=jogo&nomeUsuario=&nomeJogo=&tema=<%= jogo.tema_id %>&dominio=0&mecanica=0')

        console.log(teste);
      </script>
      <script src="js/gamec-rating.js"></script>
      <script src='js/scriptTelaJogo.js'></script>